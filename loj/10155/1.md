---
_id: "loj-10155"
title: "「一本通 5.2 例 3」数字转换"
date: 2020-01-27 18:18
update: 2020-01-27 18:18
author: Rainboy
tags:
    - 树形DP
    - 树的直径
    - 数论
catalog: 树形DP
source: 
    - 
      oj: LOJ
      url: https://loj.ac/problem/10155
---


@[toc]

## 分析

数论与树形DP结合的题目


这里的**约数和**和数论里的**约数和公式**不是同一个东西.因为要求不能包括自己本身.

而且我们要算出$<=n$的所有数的约数和,这里参考[rbook-约数](<%- USER.rbook_site%>6113118fea),改变一下带码,是自己不会称为自己的约数.

显然求出所有的数字的关系后,会形成一个图,然求图上的两个点的最长路.

进一步,看样例,算出每个数的约数和

```
1 0
2 1
3 1
4 3
5 1
6 6
7 1
```

画出这个图,发现形成了一棵树.

 - 每个点只会和比自己小的点连线,且只有一条
 - 1不能连比自己小的点
 - 所以一定会有n-1边,除了1每个存在的点都要连线,所以图一定联通
 - 所以一定是树,且1是根

建树,dfs+DP来求**树的直径**

技巧:想一想,之所以要dfs,是因为要保证**先算孩子结点**.

根据上面的性质:大的点一定是小的点的孩子.

所以,可以不用建树,直接从大的点到小的点枚举,就可以了.这也说明了DP的方向性(无后效性).不明白,就想想拓扑排序+DP(保证前驱已经求出).


## 代码

```c
<%- include("1.cpp") %>
```

