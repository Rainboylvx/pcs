---
_id: "luogu-P1736"
title: "创意吃鱼法"
date: 2023-07-18 10:37
update: 2023-07-18 10:37
author: Rainboy
tags:
    - 动态规划
source: 
    - 
      oj: luogu
      url: https://www.luogu.com.cn/problem/P1736
---

@[toc]

## 题目

### 题目背景 
感谢@throusea 贡献的两组数据



### 题目描述

回到家中的猫猫把三桶鱼全部转移到了她那长方形大池子中，然后开始思考：到底要以何种方法吃鱼呢（猫猫就是这么可爱，吃鱼也要想好吃法 ^\_\*）。她发现，把大池子视为 $01$ 矩阵（$0$ 表示对应位置无鱼，$1$ 表示对应位置有鱼）有助于决定吃鱼策略。

在代表池子的 $01$ 矩阵中，有很多的正方形子矩阵，如果某个正方形子矩阵的某条对角线上都有鱼，且此正方形子矩阵的其他地方无鱼，猫猫就可以从这个正方形子矩阵“对角线的一端”下口，只一吸，就能把对角线上的那一队鲜鱼吸入口中。

猫猫是个贪婪的家伙，所以她想一口吃掉尽量多的鱼。请你帮猫猫计算一下，她一口下去，最多可以吃掉多少条鱼？




### 输入格式
第一行有两个整数 $n$ 和 $m$（$n,m≥1$），描述池塘规模。接下来的 $n$ 行，每行有 $m$ 个数字（非 $0$ 即 $1$）。每两个数字之间用空格隔开。





### 输出格式

只有一个整数——猫猫一口下去可以吃掉的鱼的数量，占一行，行末有回车。




### 样例



输入/输出 # 1

::: line
```
4 6
0 1 0 1 0 0
0 0 1 0 1 0
1 1 0 0 0 1
0 1 1 0 1 0

```

```
3
```
:::





### 说明/提示
右上角的
```
1 0 0
0 1 0
0 0 1
```

### 数据范围及约定


- 对于 $30\%$ 的数据，有 $1\le n,m\le 100$；
- 对于 $60\%$ 的数据，有 $1\le n,m\le 1000$；
- 对于 $100\%$ 的数据，有 $1\le n,m\le 2500$。

## 解析

这个题目说难度有`提高+`,但真实的难度没有这么大

这里我按数据范围来写,先写一下`30%`数据的方法,这显然是一个暴力程序

先枚举点`(i,j)`,然后枚举从`(i,j)`开始的最长的对角线,显然枚举`(i,j)`需要最`n^2`,
那么确定`(i,j)`点后,枚举对角线,因为采取渐进的扫描,最多枚举`n^2`个点,


![](./1.svg)

图上的数字,表示这个格子是第几个被访问的. 那总的时间复杂度为`n^4`

当然可以创建一个每一行,每一列的前缀和,用来判断一段区间是否只包含一个`1`,这样时间优化为`n^3`
但我只想写一个最简单的暴力

注意对角线有两个方向, `\`,`/`,为了方便我们计算,我把整个矩阵左右翻转一下,就可以用同样的方法计算了

暴力代码如下

**暴力代码**,30分

```c
<%- include("1.cpp") %>
```

## 解法二,DP

设`f[i][j]`表示从`(i,j)`开始向左上能得到的最大值,


```
f[i][j] = f[i-1][j-1] + 1 ,符合条件1: a[i][j] = 1 ,len = f[i-1][j-1],a[i][j-len,j-1] = 0, a[i-len,i-1][j] =0

或者
f[i][j] = k , k表示不符合条件1的情况下,最多有多少个匹配(0的数量)

```

例如,对于下面的数据

```
4 4
1 0 1 0
0 1 0 0
1 0 1 0
0 0 0 1
```


代码2


```cpp
<%- include("1.cpp") %>
```

## 对拍

为了证明第二个代码的正确,使用了对拍,与数据生成

```sh
<%- include("./duipai.sh") %>
```

```cpp
<%- include("./data.cpp") %>
```
