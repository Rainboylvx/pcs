---
_id: "luogu-P1363"
title: "幻象迷宫"
date: 2023-7-18 01:30:45
update: 2023-7-18 01:30:45
author: Rainboy
tags:
    - 找规律
    - 迷宫
source: 
    - 
      oj: luogu
      url: https://www.luogu.com.cn/problem/P1363
---

@[toc]

## 题目



### 题目描述


（喵星人LHX和WD同心协力击退了汪星人的入侵，不幸的是，汪星人撤退之前给它们制造了一片幻象迷宫。）

WD：呜呜，肿么办啊……

LHX：momo...我们一定能走出去的！

WD：嗯，+U+U！

描述 Description

幻象迷宫可以认为是无限大的，不过它由若干个N\*M的矩阵重复组成。矩阵中有的地方是道路，用'.'表示；有的地方是墙，用'#'表示。LHX和WD所在的位置用'S'表示。也就是对于迷宫中的一个点(x,y)，如果(x mod n,y mod m)是'.'或者'S'，那么这个地方是道路；如果(x mod n,y mod m)是'#'，那么这个地方是墙。LHX和WD可以向上下左右四个方向移动，当然不能移动到墙上。

请你告诉LHX和WD，它们能否走出幻象迷宫（如果它们能走到距离起点无限远处，就认为能走出去）。如果不能的话，LHX就只好启动城堡的毁灭程序了……当然不到万不得已，他不想这么做。。。



### 输入格式
输入包含多组数据，以EOF结尾。

每组数据的第一行是两个整数N、M。

接下来是一个N\*M的字符矩阵，表示迷宫里(0,0)到(n-1,m-1)这个矩阵单元。




### 输出格式

对于每组数据，输出一个字符串，Yes或者No。




### 样例

|----|----|
|输入 #1  |输出 #1  |
|```  |```  \
|5 4  |Yes  \
|##.#  |No  \
|##S#  |  \
|#..#  |  \
|#.##  |```  \
|#..#  |   \
|5 4  |   \
|##.#  |   \
|##S#  |   \
|#..#  |   \
|..#.  |   \
|#.##  |   \
|  |   \
|```  |   |



### 说明/提示
对于30%的数据，N,M<=20

对于50%的数据，N.M<=100.

对于100%的数据，N,M<=1500，每个测试点不超过10组数据.



## 解析


关键在于怎么样才算走到无限远呢?

从某边缘的某个点出发,又回到这个点

注意,应该是从上边缘某个点A出发,可以到达下边缘的某个点B,然后又从B可以达到A

同理从左边缘也是这样考虑的


注意下现这个数据非常的坑
```
#.#.#
..#..
#####
.S#..
#.#.#
```
甚至我可以构造一个更加坑的数据

```
#.#
###
#.#
```

还有这种数据

```
8 9
###.#.#.#
#..S#.#.#
#.###.#.#
#.#...#.#
#.#.###.#
#.#.#...#
#.#.#.###
..#.#.#..
```


**最最最最核心的问题,或者说你需要找到的规律,或者说需要找到的定理:怎么才叫做无限的访问呢?**

也就是说这个题目,是一个我们自己找**找规律**的题目,这种题目是最难的.

找规律的题目的第一步: 就是构造数据,然后从这些数据中找到共同点(一般化).


不同迷宫上的点访问到同一个点(映射到原始迷宫上的点坐标),相当于形成了一个"环",那这样就可以无限的访问下去了

一个点被访问

- tox ,toy表示原始坐标

```
vis[tox][toy] = { x,y}
```
我们使用`vis[tox][toy]`记录原始的`tox,toy`坐标,是被那个真实的坐标访问的.

- 如果最后没有形成一个"环",那么`vis[tox][toy]`所以的vis都被访问完了,但也没有找到一个原始坐标,被不同的真实坐标访问
- 如果找到了一个`vis[tox][toy]`被不同的真实坐标访问,那就形成了一个环


### 规律2 ,通过的边界数

最简单的直线型,通过的边界数为1或0

双斜线型,通过的边界数为`上1,右0`,或`上1,右1`,或

环形非连通


### 转化成图来做

首先想到连通块

## 代码

```c
<%- include("1.cpp") %>
```
