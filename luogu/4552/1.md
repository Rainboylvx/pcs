---
_id: "luogu-P4552"
title: "[Poetize6] IncDec Sequence"
date: 2023-08-12 17:20
update: 2023-08-12 17:20
author: Rainboy
tags:
    - 差分数组
source: 
    - 
      oj: luogu-P4552
      url: https://www.luogu.com.cn/problem/P4552
---

@[toc]

## 题目



### 题目描述

给定一个长度为 $n$ 的数列 ${a_1,a_2,\cdots,a_n}$，每次可以选择一个区间$[l,r]$，使这个区间内的数都加 $1$ 或者都减 $1$。 
  
请问至少需要多少次操作才能使数列中的所有数都一样，并求出在保证最少次数的前提下，最终得到的数列有多少种。



### 输入格式
第一行一个正整数 $n$   
接下来 $n$ 行,每行一个整数,第 $i+1 $行的整数表示 $a_i$。



### 输出格式

第一行输出最少操作次数   
第二行输出最终能得到多少种结果




### 样例



输入/输出 # 1

::: line
```
4
1
1
2
2
```

```
1
2
```
:::





### 说明/提示

对于 $100\%$ 的数据，$n\le 100000, 0 \le a_i \le 2^{31}$。


## 解析

题目大意: 每一次对一个连续区间进行`-1 or +1`,问最少多少次可以使所有的数据的值一样


最重要的思维模型:

- 这个题目如果你去写暴力,你写不出来
- 发现如果把原数组转成差分数组,(因为你需要把区间加减,转成单点操作)
- 你就发现,如果所有的数都是一样的,那么在差分数组上就是`x 0 0 0 0 0`
- 也就是说,除了第一个元素个,其它全是0

于是问题就转换成,怎么把差分数组的`[2,n]`这些区间上的数全部变成0,

你只要实际的在纸上模拟一下,你就可以得到,这个最少的操作次数
就是`max(abs(2到n的负数和),2到n的正数和)`



比如有一个差数组如下

```plantext
10 -10 6 7
```


因为进行区间操作的时候,一定是,一个数加,一个数减

所以

```plantext
10 -3 6 0
```

```plantext
10 0 3 0
```

```plantext
13 0 0 0
```



正数和`13`,负数和是`-10`,答案就是最大值


Q2:最后有多少种结果: `abs(正数和 - 绝对值(负数和)) + 1`


```plantext
0 0 1 0
```
只要把1消除成0就可以了

有两种方式

1. 操作区间`[1,2]`全部加1
2. 操作区间`[3,4]`全部减1




## 代码

```c
<%- include("1.cpp") %>
```
