---
_id: "luogu-P6583"
title: "回首过去"
date: 2020-07-22 10:58
update: 2020-07-22 10:58
author: Rainboy
tags:
    - 整除分块
    - 二分查找
    - 容斥原理
    - 数论
catalog: 数学
source: 
    - 
      oj: luogu
      url: https://www.luogu.com.cn/problem/P6583
pre_article:
    - luogu-P2261
    - luogu-P1403
---


@[toc]


@[toc]

## 题目

### 题目背景 
>明天你是否会想起
>
>昨天未调完的题
>
>明天你是否还惦记
>
>考场写挂的暴力

[OEIS 入口](http://oeis.org/)



### 题目描述

在小学时，小 Z 就已经开始学
 OI 了。

有一次，在数学课上，老师问了这样一个问题：
求出有序整数对 $(x,y)$ 的个数，满足 $1\le x,y\le 5$ 且 $\frac{x}{y}$ 可以表示为十进制有限小数。

当然，小 Z 很快就算了出来。

但因为他是学了 OI 的，所以他就推广了一下：

**给定正整数 $n$，求出有序整数对 $(x,y)$ 的个数，满足 $1\le x,y\le n$ 且 $\frac{x}{y}$ 可以表示为十进制有限小数。**

当时，他还是一个菜鸡，只会
 $O(n^2)$ 的暴力。

过了几年，他偶然又翻到了这道题。现在他会了一种更好的方法，于是就把这题出了出来，给你做。



### 输入格式
一行一个正整数 $n$。



### 输出格式

一行一个整数表示答案。



### 样例

|----|----|
|输入 #1  |输出 #1  |
|```  |```  \
|3  |7  \
|```  |```  |
|输入 #2  |输出 #2  |
|```  |```  \
|5  |21  \
|```  |```  |



### 说明/提示
**样例 1 解释**

$\frac{1}{1}$，$\frac{1}{2}$，$\frac{2}{1}$，$\frac{2}{2}$，$\frac{3}{1}$，$\frac{3}{2}$，$\frac{3}{3}$ 都可以表示为十进制有限小数。

**数据规模与约定**

* Subtask 1（40 分），$1 \le n \le 10^3$；
* Subtask 2（40 分），$1 \le n \le 10^7$；
* Subtask 3（20 分），$1 \le n \le 10^{12}$。


## 解析

考点一: $x / y$可以表示为十进制有限小数,那么它的最简形式中必含有2或5才可以。

可以过Subtask1 40分 


考点二：过$10^7$

当我们固定y的时候，y有两种情况：

 - y只含有2或5的因子，则[1,n]都满足。
 - y不只含有2或5的因子，y去除2或5的因子后，剩下的数$y'$,[1,n]中所有的$y'$的倍数都可以满足。个数就是：$\lfloor \frac{n}{y'} \rfloor$

所以只要枚举y就可以得到答案。

考点三：

根据**考点二**可以得到一个公式：$\sum_{i=1}^n \lfloor \frac{n}{\frac{i}{2^α \times 5^β}} \rfloor$， 感觉它很像能整除分块的形式$\sum \lfloor \frac{n}{i} \rfloor$

求出一段区间[l,r]内不包含因子2和5数的个数，可以用容斥原理。
求整除分块的时间为$O(\sqrt{n})$


**显然我们要求一个分母为t的，且t不包含2和5因子的，整除分块前缀和**$\sum \lfloor \frac{n}{t} \rfloor,2 \nmid t\ and\ 5 \nmid t$


## 代码

```c
<%- include("1.cpp") %>
```
