---
_id: "luogu-P5019"
title: "[NOIP2018 æé«˜ç»„] é“ºè®¾é“è·¯"
date: 2023-08-01 16:05
update: 2023-08-01 16:05
author: Rainboy
tags:
    - 
source: 
    - 
      oj: luogu-P5019
      url: https://www.luogu.com.cn/problem/P5019
---

@[toc]

## é¢˜ç›®

### é¢˜ç›®èƒŒæ™¯ 
NOIP2018 æé«˜ç»„ D1T1



### é¢˜ç›®æè¿°

æ˜¥æ˜¥æ˜¯ä¸€åé“è·¯å·¥ç¨‹å¸ˆï¼Œè´Ÿè´£é“ºè®¾ä¸€æ¡é•¿åº¦ä¸º $n$ çš„é“è·¯ã€‚ 

é“ºè®¾é“è·¯çš„ä¸»è¦å·¥ä½œæ˜¯å¡«å¹³ä¸‹é™·çš„åœ°è¡¨ã€‚æ•´æ®µé“è·¯å¯ä»¥çœ‹ä½œæ˜¯ $n$ å—é¦–å°¾ç›¸è¿çš„åŒºåŸŸï¼Œä¸€å¼€å§‹ï¼Œç¬¬ $i$ å—åŒºåŸŸä¸‹é™·çš„æ·±åº¦ä¸º $d_i$ ã€‚ 

æ˜¥æ˜¥æ¯å¤©å¯ä»¥é€‰æ‹©ä¸€æ®µè¿ç»­åŒºé—´ $[L,R]$ ï¼Œå¡«å……è¿™æ®µåŒºé—´ä¸­çš„æ¯å—åŒºåŸŸï¼Œè®©å…¶ä¸‹é™·æ·±åº¦å‡å°‘ $1$ã€‚åœ¨é€‰æ‹©åŒºé—´æ—¶ï¼Œéœ€è¦ä¿è¯ï¼ŒåŒºé—´å†…çš„æ¯å—åŒºåŸŸåœ¨å¡«å……å‰ä¸‹é™·æ·±åº¦å‡ä¸ä¸º $0$ ã€‚ 

æ˜¥æ˜¥å¸Œæœ›ä½ èƒ½å¸®ä»–è®¾è®¡ä¸€ç§æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨æœ€çŸ­çš„æ—¶é—´å†…å°†æ•´æ®µé“è·¯çš„ä¸‹é™·æ·±åº¦éƒ½å˜ä¸º $0$ ã€‚ 



### è¾“å…¥æ ¼å¼
è¾“å…¥æ–‡ä»¶åŒ…å«ä¸¤è¡Œï¼Œç¬¬ä¸€è¡ŒåŒ…å«ä¸€ä¸ªæ•´æ•° $n$ï¼Œè¡¨ç¤ºé“è·¯çš„é•¿åº¦ã€‚ ç¬¬äºŒè¡ŒåŒ…å« $n$ ä¸ªæ•´æ•°ï¼Œç›¸é‚»ä¸¤æ•°é—´ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€ï¼Œç¬¬ $i$ ä¸ªæ•´æ•°ä¸º $d_i$ ã€‚ 



### è¾“å‡ºæ ¼å¼

è¾“å‡ºæ–‡ä»¶ä»…åŒ…å«ä¸€ä¸ªæ•´æ•°ï¼Œå³æœ€å°‘éœ€è¦å¤šå°‘å¤©æ‰èƒ½å®Œæˆä»»åŠ¡ã€‚ 



### æ ·ä¾‹



è¾“å…¥/è¾“å‡º # 1

::: line
```
6   
4 3 2 5 3 5 

```

```
9
```
:::





### è¯´æ˜/æç¤º
ã€æ ·ä¾‹è§£é‡Šã€‘

ä¸€ç§å¯è¡Œçš„æœ€ä½³æ–¹æ¡ˆæ˜¯ï¼Œä¾æ¬¡é€‰æ‹©ï¼š 
$[1,6]$ã€$[1,6]$ã€$[1,2]$ã€$[1,1]$ã€$[4,6]$ã€$[4,4]$ã€$[4,4]$ã€$[6,6]$ã€$[6,6]$ã€‚   

ã€æ•°æ®è§„æ¨¡ä¸çº¦å®šã€‘

å¯¹äº $30\%$ çš„æ•°æ®ï¼Œ$1 â‰¤ n â‰¤ 10$ ï¼›    
å¯¹äº $70\%$ çš„æ•°æ®ï¼Œ$1 â‰¤ n â‰¤ 1000$ ï¼›     
å¯¹äº $100\%$ çš„æ•°æ®ï¼Œ$1 â‰¤ n â‰¤ 100000 , 0 â‰¤ d_i â‰¤ 10000$ ã€‚   



## NOIP2018 Day1 T1 é“è·¯é“ºè®¾ é¢˜ç›®è§£æ

è¿™ä¸ªé¢˜ç›®å’Œä»¥å‰ä¸€ä¸ªé¢˜ç›® `ç§¯æœ¨å¤§å¦` ä¸€æ ·

## 30%å¾—åˆ†çš„è§£æ

å¯¹äº30%çš„æ•°æ®`1 â‰¤ ğ‘› â‰¤ 10`,néå¸¸çš„å°,é‚£ä¹ˆå¯ä»¥ç”¨æœç´¢çš„æ–¹æ³•è§£å†³é—®é¢˜

éå†æ•´ä¸ªæ•°ç»„,æ‰¾åˆ°æœ€å°çš„ä¸ä½†ä¸ä¸º0çš„æ•°,è®°å®ƒçš„ä½ç½®ä¸ºpos,ç„¶åä»poså‘å·¦æ‰¾å•è°ƒå¢çš„åŒºé—´a,å‘å³æ‰¾å•è°ƒå¢åŠ çš„åŒºé—´b,aå’Œbåˆå¹¶çš„åŒºé—´å°±æ˜¯è¦ä¿®æ”¹çš„åŒºé—´,ä¿®æ”¹çš„æ¬¡æ•°ä¸º$a[pos]$.

ä¸åœçš„æŒ‰ä¸Šé¢çš„æ–¹å¼æŸ¥æ‰¾,ç›´åˆ°æ‰€æœ‰çš„æ•°å­—ä¸º0,æ—¶é—´å¤æ‚åº¦å¤§æ¦‚ä¸º$n^3$

## 70%å¾—åˆ†çš„è§£æ

ç”±é¢˜ç›®å¯ä»¥çŸ¥é“:æ¯ä¸ªæ•°å­—æœ‰ä¸€ä¸ª**ä¿®æ”¹åŒºé—´**:æ•°çš„å·¦å³ä¸¤è¾¹çš„å¢åŒºé—´

![18d1t1-1.png](https://i.loli.net/2018/12/21/5c1c7626789a7.png)

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆè®°å½•æ¯ä¸ªæ•°å­—çš„ä½ç½®,æ±‚å‡ºæ¯ä¸ªæ•°å­—æ‰€åœ¨çš„**ä¿®æ”¹åŒºé—´**,ç„¶åæ’åº,ä¾æ¬¡è¿›è¡ŒåŒºé—´ä¿®æ”¹

è®¾$fl[i]$è¡¨ç¤ºç¬¬$i$ä¸ªä½ç½®çš„æ•°å­—çš„ä¿®æ”¹åŒºé—´çš„å·¦å€¼:

$$fl[i] = fl[i-1],a[i-1] >= a[i]$$
$$fl[i] = 1,a[i-1] < a[i]$$

åŒç†æˆ‘ä»¬å¯ä»¥æ±‚å‡º$fr[i]$,åˆå¹¶ä¹‹å,å°±å¯ä»¥çŸ¥é“içš„**ä¿®æ”¹åŒºé—´çš„å¤§å°**,æ—¶é—´å¤æ‚åº¦$n^2$


## 100%å¾—åˆ†çš„è§£æ

```
å¯¹äº100%çš„æ•°æ®ï¼Œ1 â‰¤ ğ‘› â‰¤ 100000ï¼Œ0 â‰¤ di â‰¤ 10000 
```

10ä¸‡çš„æ•°æ®ä¸å¯èƒ½ä½¿ç”¨$n^2$çš„ç®—æ³•,æ ¹æ®åšé¢˜ç›®çš„ç»éªŒ,è¿™ä¸ªé¢˜ç›®å¾ˆå¯èƒ½**å­˜åœ¨ç‰¹åˆ«çš„è§„å¾‹**,ç„¶åæŒ‰ä¸ªè¿™ä¸ªè§„å¾‹æ¥åš,å¯ä»¥é™ä½å¤æ‚åº¦.


ç±»å‹1:å¦‚æœæ•°ç»„çš„å€¼æ˜¯å•è°ƒä¸Šå‡çš„,è¿™ä¸ªæ—¶é—´çš„å¤©æ•°å°±æ˜¯æœ€å¤§å€¼.

![18d1t1-2.png](https://i.loli.net/2018/12/21/5c1c7626899f3.png)

ç±»å‹2:å¦‚æœæ•°ç»„çš„å€¼æ˜¯ä¸€è¾¹æ˜¯å•è°ƒä¸Šå‡çš„,ä¸€è¾¹æ˜¯å•è°ƒä¸‹é™çš„,è¿™ä¸ªæ—¶é—´çš„å¤©æ•°å°±æ˜¯ä¹Ÿè¿˜æ˜¯æœ€å¤§å€¼.å› ä¸º:**ä½ æŠŠå·¦è¾¹ä¸Šå‡çš„åŒºé—´å†…çš„æŒ–å®Œçš„æ—¶é—´å†…,ä¹Ÿå°±èƒ½æŠŠå³è¾¹åŒºé—´ä¹Ÿèƒ½æŒ–å®Œ!**

![18d1t1-3.png](https://i.loli.net/2018/12/21/5c1c7626919ba.png)

ç±»å‹3:å¤šä¸ªä¸Šå‡ä¸‹é™åŒºé—´çš„ç»„åˆ
![18d1t1-4.png](https://i.loli.net/2018/12/21/5c1c76269e436.png)

![18d1t1-5 .png](https://i.loli.net/2018/12/21/5c1c76267d9fd.png)

å…ˆæŒ–æœ€ä½ç‚¹,æŒ–å®Œå,å°±ä¼šåˆ†æˆå¤šä¸ªä¸è¿ç»­çš„åŒºé—´,æ¯ä¸ªåŒºé—´å°±è¦åˆ†åˆ«çš„è®¡ç®—æ—¶é—´,æ¯ä¸ªåŒºé—´çš„è®¡ç®—æ–¹å¼å°±æ˜¯ä¸Šå‡çš„é‚£ä¸ªåŒºé—´çš„ç›¸é‚»æ•°å­—çš„å·®å€¼å’Œ.

ç±»å‹4:å¦‚æœç¬¬ä¸€ä¸ªåŒºé—´æ˜¯ä¸‹é™çš„å‘¢?

æˆ‘ä»¬å¯ä»¥è®¤ä¸ºå­˜åœ¨ç¬¬0ä¸ªæ•°æ®,è¿™ä¸ªé“è·¯æ˜¯å¹³çš„,è¿™æ ·å°±å¯ä»¥ä¿è¯ç¬¬ä¸€ä¸ªåŒºé—´ä¸€å®šä¸Šå‡çš„.

![18d1t1-6.png](https://i.loli.net/2018/12/21/5c1c76266b94b.png)

ç»¼ä¸Šæ‰€è¿°,å…·ä½“åšæ³•ä¸º:æ·»åŠ ä¸€ä¸ªè™šæ‹Ÿ0ç‚¹,æ¯ä¸ªç‚¹iéƒ½å’Œå‰ä¸€ä¸ªç‚¹i-1æ¯”è¾ƒ,å¦‚æœa[i-1] > a[i] ä¸è®¡ç®—,å¦‚æœ$a[i-1] <a[i]$,é‚£ä¹ˆ$ans += (a[i]- a[i-1])$


### æ›´ç®€å•å’ŒæŠ½è±¡çš„æƒ³æ³•,DPè§£æ³•

è®¾$f[i]$è¡¨ç¤ºå¤„ç†å®Œå‰$i$ä¸ªå‘æ‰€éœ€çš„æœ€å°å¤©æ•°,è€ƒè™‘:$a[i+1]$,

- å¦‚æœ$a[i] > a[i+1]$,$i+1$åœ¨ä¸€ä¸ªä¸‹é™çš„åºåˆ—ä¸­,é‚£ä¹ˆç¬¬$i+1$ä¸ªå‘ä¸€å®šå¯ä»¥åœ¨$f[i]$å¤©ä¸­å®Œæˆ
- å¦‚æœ$a[i] < a[i+1]$,$i+1$åœ¨ä¸€ä¸ªä¸Šå‡çš„åºåˆ—ä¸­,é‚£ä¹ˆç¬¬$i+1$ä¸ªå‘è¿˜éœ€è¦$a[i+1]-a[i]$å¤©æ—¶é—´

çŠ¶æ€è½¬ç§»ä¸º:

$$f[i] = f[i-1] + a[i]-a[i-1],a[i] > a[i-1]$$

## ä»£ç 

```c
#include <iostream>
 
using namespace std;
const int maxn=1e5+5;
int a[maxn];
int main(){
    int n;
    cin>>n;
    int lst=0;
    int ans=0;
    for(int i=0;i<n;i++){ //è¾¹è¯»å–è¾¹åš
        int now;
        cin>>now;
        if(now>lst)
            ans+=now-lst;
        lst=now;
    }
    cout<<ans<<endl;
    return 0;
}
```
