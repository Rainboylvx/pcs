---
_id: f3cdba8ab3
title: "P2419 [USACO08JAN]牛大赛Cow Contest"
date: 2019-11-05 08:13
update: 2019-11-05 08:13
author: Rainboy
tags:
    - floyed
    - 拓扑排序
    - 发现性质
catalog: 发现性质
source: 
    - 
      oj: luogu
      url: https://www.luogu.org/problem/P2419
---

## 解析

一个神奇的题目,题目本质在问:

 - 在一个DAG中,拓扑排序后,有几个点的位置固定不变
 - 在一个DAG中,一个点能否到达其他所有点(其他点到达它,也算到达)

上面的两个描述是等价的,~~很容易想到~~,如果一个点u的位置固定,那不应该存在一个*自由点x*,可以自由的在u的前面和后面(拓扑排序的位置),**也就是说,u的前驱 + u的后趋 == n-1**,相对u,不存在自由点x.

### 方法1

可以利用$floyed$算法,求出任意两个点的到达关系(传递闭包),从而确定前驱,后驱的数量.

### 方法2

正向,反向建图,利用dfs来求前驱,后驱

### 方法3

在**拓扑排序**的过程中,如果某时,只有一个入度为0的点,那么此时剩余的点都是这个点的后驱. 如果已经处理过的点全部都是这个点的前驱,它是固定位置.

如何判断**已经处理过的点全部都是这个点的前驱**?,利用处理过的点和边建反向图,然后dfs遍历判断

### 方法4

拓扑排序+并查集,:cry: 我好菜,想不出来



## 代码: 方法3

```c
<%- include("1.cpp") %>
```
