---
_id: "luogu-P2422"
title: "良好的感觉"
date: 2023-08-12 15:50
update: 2023-08-12 15:50
author: Rainboy
tags:
    - 单调栈
source: 
    - 
      oj: luogu-P2422
      url: https://www.luogu.com.cn/problem/P2422
---

@[toc]

## 题目



### 题目描述

kkk 做了一个人体感觉分析器。每一天，人都有一个感受值 $A_i$，$A_i$ 越大，表示人感觉越舒适。在一段时间 $\left[i, j\right]$ 内，人的舒适程度定义为 $\left[i, j\right]$ 中最不舒服的那一天的感受值 $\times$ $\left[i, j\right]$中每一天感受值的和。现在给出 kkk 在连续 $N$ 天中的感受值，请问，在哪一段时间，kkk 感觉最舒适？




### 输入格式
第一行为 $N$，代表数据记录的天数。

第二行 $N$ 个整数，代表每一天的感受值。



### 输出格式

一行，表示在最舒适的一段时间中的感受值。




### 样例



输入/输出 # 1

::: line
```
6
3 1 6 4 5 2
```

```
60
```
:::





### 说明/提示
kkk 最开心的一段时间是第 $3$ 天到第 $5$ 天，开心值：$(6+4+5)\times4=60$。

对于 $30\%$ 的数据，$1\le N\le 100$。

对于 $70\%$ 的数据，$1\le N\le 2000$。

对于 $100\%$ 的数据，$1\le N\le 100000$，$1\le \texttt{感受值}\le 1000000$。


## 解析

需要暴力验证一下

这个数据,证明这个思想是错误的

```
7
9 4 9 10 7 1 10 
```

正确答案选`9 10 7`,答案为`182`

按上面的思想来,选的是`9 4 9 10 7`答案为`156`


想一想为什么错?

- 当i是前i个数里的最小数里,那么把前面所有的数都选了,那就是最优秀的,因为每选一个比较自己大的数,和都会变大,但min不会变

按这个思想来,那7一定会选前面的`9 10`,那对于4,它会不会选呢,这个时间要分两种情况,选和不选来考虑


每个元素,都需要把前面比自己大的元素给选上.

关键的问题是,如果遇到比自己小的元素,那选它吗?
:

我们可以想到:**sum[i]表示以a[i]为最小值时,能得到的和**,那么所以的值都能求出,最后找一个最大值就可以了



## 代码

```c
<%- include("2.cpp") %>
```
