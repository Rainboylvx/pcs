---
title: "[noip2002 普级]选数"
date: 2019-03-30 18:10
update: 2019-03-30 18:10
author: Rainboy
---

## 题目地址

 - SlimeOJ 3513
 - [luogu p1036 选数](https://www.luogu.org/problemnew/show/P1036)

## 解析

这其时是一个数学问题:从$n$个数里选$x$个数,可能情况有哪些?这是数学上的**组合知识**,高中的内容.

例如:从`1,2,3`中选两个数的可能为:

```
1 2
1 3
2 3
```

关键在于选了`1,2`后,怎么才能不出现`2,1`呢?

关键在于:你选的第$i$个数的位置,一定在选的第$i-1$个数的后面!!

所以最后的想法就是利用$DFS$选数,判断最后形成的和为素数的方案数!


## 代码

```c
#include <cstdio>
#include <cmath>

int a[30];
int n,k;
int ans = 0;
int cnt = 0;

bool isprime(int x){
    int i;
    for(i=2;i<=(int)sqrt(x);i++){
        if( x % i == 0)
            return false;
    }
    return true;
}

/*  p postion 从哪个数开始选
 *  dep 正在选的是第几个数
 *  n-k+dep 表示 后面 k-dep个数保留
 * */
void zh(int p,int dep){

    if( dep > k){
        if(isprime(cnt)) ans++;
        return ;
    }

    int i;
    for(i=p ; i<=(n-k+dep);i++){
        cnt += a[i];
        zh(i+1,dep+1);
        cnt -= a[i];
    }
}


int main(){
    scanf("%d%d",&n,&k);
    int i;
    for (i=1;i<=n;i++){
        scanf("%d",&a[i]);
    }
    zh(1,1);
    printf("%d",ans);
    return 0;
}
```
